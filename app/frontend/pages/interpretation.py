import streamlit as st
import pandas as pd
import plotly.express as px

st.set_page_config(
    page_title="–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ - Bank Churn", 
    page_icon="üîç",
    layout="wide"
)

def load_css():
    try:
        with open("assets/styles/eda.css", "r", encoding='utf-8') as f:
            st.markdown(f"<style>{f.read()}</style>", unsafe_allow_html=True)
    except FileNotFoundError:
        st.warning("–§–∞–π–ª —Å—Ç–∏–ª–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω")

load_css()

st.markdown("""
<div class="eda-container">
    <h1 class="eda-title">üîç –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–æ–¥–µ–ª–∏</h1>
    <div class="eda-card">
        <p style="text-align: center; font-size: 1.2rem; margin: 0;">
            SHAP –∞–Ω–∞–ª–∏–∑, –±–∏–∑–Ω–µ—Å-–∏–Ω—Å–∞–π—Ç—ã –∏ –ø–æ—Ä—Ç—Ä–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –æ—Ç—Ç–æ–∫–∞.
        </p>
    </div>
</div>
""", unsafe_allow_html=True)

st.sidebar.markdown("""
<div class="sidebar-nav">
    <h3 style="margin-bottom: 1rem; border-bottom: 1px solid #2a2f38; padding-bottom: 0.5rem;">üîç –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏</h3>
""", unsafe_allow_html=True)

section = st.sidebar.radio(
    "–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞–∑–¥–µ–ª:",
    ["SHAP –∞–Ω–∞–ª–∏–∑", "Beeswarm –≥—Ä–∞—Ñ–∏–∫", "–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤", 
     "Waterfall –∞–Ω–∞–ª–∏–∑", "–ü–æ—Ä—Ç—Ä–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤", "–ë–∏–∑–Ω–µ—Å-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏"],
    label_visibility="collapsed"
)

st.sidebar.markdown("</div>", unsafe_allow_html=True)

@st.cache_data
def load_interpretation_data():
    shap_importance = {
        '–ü—Ä–∏–∑–Ω–∞–∫': ['NumOfProducts', 'IsActiveMember', 'Age', 'Balance', 'Gender', 
                   'Geography_Germany', 'CreditScore', 'Tenure', 'Geography_Spain', 'EstimatedSalary'],
        'SHAP_–∑–Ω–∞—á–µ–Ω–∏–µ': [1.85, 0.70, 0.34, 0.34, 0.22, 0.18, 0.15, 0.12, 0.08, 0.05],
        '–í–ª–∏—è–Ω–∏–µ': ['üöÄ –û—á–µ–Ω—å —Å–∏–ª—å–Ω–æ–µ', 'üìä –°–∏–ª—å–Ω–æ–µ', 'üìà –£–º–µ—Ä–µ–Ω–Ω–æ–µ', 'üìà –£–º–µ—Ä–µ–Ω–Ω–æ–µ', 'üìà –£–º–µ—Ä–µ–Ω–Ω–æ–µ',
                   'üìâ –°–ª–∞–±–æ–µ', 'üìâ –°–ª–∞–±–æ–µ', 'üìâ –°–ª–∞–±–æ–µ', 'üìâ –°–ª–∞–±–æ–µ', 'üìâ –û—á–µ–Ω—å —Å–ª–∞–±–æ–µ']
    }
    
    factors_impact = {
        '–§–∞–∫—Ç–æ—Ä': ['1 –ø—Ä–æ–¥—É–∫—Ç –±–∞–Ω–∫–∞', '–ù–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å', '–í–æ–∑—Ä–∞—Å—Ç 45+', '–ú—É–∂—Å–∫–æ–π –ø–æ–ª', 
                  '–í—ã—Å–æ–∫–∏–π –±–∞–ª–∞–Ω—Å', '–ì–µ—Ä–º–∞–Ω–∏—è', '–ù–∏–∑–∫–∏–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–µ–π—Ç–∏–Ω–≥'],
        '–í–ª–∏—è–Ω–∏–µ_–Ω–∞_–æ—Ç—Ç–æ–∫': ['üöÄ –°–∏–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç', 'üöÄ –°–∏–ª—å–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç', 'üìà –£–º–µ—Ä–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç',
                           'üìà –£–º–µ—Ä–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç', 'üìà –£–º–µ—Ä–µ–Ω–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç', 'üìâ –°–ª–∞–±–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç', 'üìâ –°–ª–∞–±–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç'],
        '–ë–∏–∑–Ω–µ—Å_–∑–Ω–∞—á–µ–Ω–∏–µ': ['–ö–ª—é—á–µ–≤–æ–π —Ñ–∞–∫—Ç–æ—Ä —Ä–∏—Å–∫–∞', '–ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä', '–î–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π —Ä–∏—Å–∫',
                          '–ì–µ–Ω–¥–µ—Ä–Ω–∞—è –ø—Ä–µ–¥—Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å', '–†–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ VIP', '–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å', '–ö—Ä–µ–¥–∏—Ç–Ω—ã–π —Ä–∏—Å–∫']
    }
    
    customer_profiles = {
        '–ü—Ä–æ—Ñ–∏–ª—å': ['–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫', '–ù–∏–∑–∫–∏–π —Ä–∏—Å–∫', 'VIP –∫–ª–∏–µ–Ω—Ç', '–ú–æ–ª–æ–¥–æ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π'],
        '–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å_–æ—Ç—Ç–æ–∫–∞': [27.3, 5.1, 1.2, 15.2],
        '–£—Ä–æ–≤–µ–Ω—å_—Ä–∏—Å–∫–∞': ['üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π', 'üü¢ –ù–∏–∑–∫–∏–π', 'üü¢ –ù–∏–∑–∫–∏–π', 'üü° –°—Ä–µ–¥–Ω–∏–π'],
        '–ü—Ä–æ–¥—É–∫—Ç—ã': [1, 3, 4, 1],
        '–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å': ['–ù–µ–∞–∫—Ç–∏–≤–µ–Ω', '–ê–∫—Ç–∏–≤–µ–Ω', '–ê–∫—Ç–∏–≤–µ–Ω', '–ù–µ–∞–∫—Ç–∏–≤–µ–Ω'],
        '–í–æ–∑—Ä–∞—Å—Ç': [52, 28, 45, 24]
    }
    
    return pd.DataFrame(shap_importance), pd.DataFrame(factors_impact), pd.DataFrame(customer_profiles)

shap_df, factors_df, profiles_df = load_interpretation_data()

if section == "SHAP –∞–Ω–∞–ª–∏–∑":
    st.markdown('<h2 class="eda-subtitle">üìä SHAP –∞–Ω–∞–ª–∏–∑ –º–æ–¥–µ–ª–∏</h2>', unsafe_allow_html=True)
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("""
        <div class="eda-card">
            <h3 style="color: #b8860b;">–ß—Ç–æ —Ç–∞–∫–æ–µ SHAP –∞–Ω–∞–ª–∏–∑?</h3>
            <div>
                <p><strong>SHAP (SHapley Additive exPlanations)</strong> - –º–µ—Ç–æ–¥ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.</p>
                <p>–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞ –≤ –∏—Ç–æ–≥–æ–≤–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.</p>
            </div>
        </div>
                    
        <div class="eda-card">
            <div style="margin-top: 1rem;">
                <strong>–ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å:</strong>
                <ul>
                    <li><span style="color: #ff4d4f;">üî¥ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</span> - —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞</li>
                    <li><span style="color: #2ebd85;">üü¢ –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è</span> - —É–º–µ–Ω—å—à–∞—é—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞</li>
                    <li><strong>–í—ã—Å–æ—Ç–∞ —Å—Ç–æ–ª–±—Ü–∞</strong> - —Å–∏–ª–∞ –≤–ª–∏—è–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–∞</li>
                </ul>
            </div>
        </div>
        """, unsafe_allow_html=True)
        
        st.markdown("""
        <div class="eda-card">
            <h3 style="color: #b8860b;">–ö–ª—é—á–µ–≤—ã–µ –∏–Ω—Å–∞–π—Ç—ã</h3>
            <div>
                <p><strong>–¢–æ–ø-3 —Å–∞–º—ã—Ö –≤–ª–∏—è—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–∞:</strong></p>
                <ol>
                    <li><strong>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</strong> - –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–π —Ñ–∞–∫—Ç–æ—Ä –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</li>
                    <li><strong>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</strong> - –∫–ª—é—á–µ–≤–æ–π –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä</li>
                    <li><strong>–í–æ–∑—Ä–∞—Å—Ç</strong> - –≤–∞–∂–Ω–∞—è –¥–µ–º–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞</li>
                </ol>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    with col2:
        st.markdown('<div class="eda-card"><h4>–†–µ–π—Ç–∏–Ω–≥ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h4>', unsafe_allow_html=True)
        
        fig = px.bar(shap_df.head(8), x='SHAP_–∑–Ω–∞—á–µ–Ω–∏–µ', y='–ü—Ä–∏–∑–Ω–∞–∫',
                    orientation='h',
                    color='SHAP_–∑–Ω–∞—á–µ–Ω–∏–µ',
                    color_continuous_scale='Viridis',
                    title='–¢–æ–ø-8 —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –ø–æ SHAP')
        fig.update_layout(
            paper_bgcolor='rgba(0,0,0,0)',
            plot_bgcolor='rgba(0,0,0,0)',
            font_color='#a0a5b0',
            yaxis={'categoryorder': 'total ascending'}
        )
        st.plotly_chart(fig, use_container_width=True)
        st.markdown('</div>', unsafe_allow_html=True)

elif section == "Beeswarm –≥—Ä–∞—Ñ–∏–∫":
    st.markdown('<h2 class="eda-subtitle">üé® Beeswarm –≥—Ä–∞—Ñ–∏–∫ SHAP –∑–Ω–∞—á–µ–Ω–∏–π</h2>', unsafe_allow_html=True)
    
    st.markdown("""
    <div class="eda-card">
        <h3 style="color: #b8860b;">–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h3>
        <div>
            <p><strong>Beeswarm –≥—Ä–∞—Ñ–∏–∫</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ SHAP –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –≤—ã–±–æ—Ä–∫–µ.</p>
            <h3> –ö–∞–∫ —á–∏—Ç–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫:</h3>
            <ul>
                <li><strong>–ü–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏</strong> - –ø—Ä–∏–∑–Ω–∞–∫–∏ –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏</li>
                <li><strong>–ü–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏</strong> - –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑</li>
                <li><strong style="color: #ff4d4f;">–ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç</strong> - –≤—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–∞</li>
                <li><strong style="color: #5294e2;">–°–∏–Ω–∏–π —Ü–≤–µ—Ç</strong> - –Ω–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–∞</li>
                <li>–ö—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞ ‚Üí –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫</li>
                <li>–°–∏–Ω–∏–µ —Ç–æ—á–∫–∏ —Å–ª–µ–≤–∞ ‚Üí –Ω–∏–∑–∫–∏–π —Ä–∏—Å–∫</li>
                <li>–®–∏—Ä–∏–Ω–∞ –æ–±–ª–∞–∫–∞ ‚Üí —Å–∏–ª–∞ –≤–ª–∏—è–Ω–∏—è</li>
            </ul>
        </div>
    </div>
    """, unsafe_allow_html=True)
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("""
        <div class="insight-card insight-strong">
            <h4>–§–∞–∫—Ç–æ—Ä—ã, —É–≤–µ–ª–∏—á–∏–≤–∞—é—â–∏–µ —Ä–∏—Å–∫ –æ—Ç—Ç–æ–∫–∞</h4>
            <ul>
                <li><strong>1 –ø—Ä–æ–¥—É–∫—Ç –±–∞–Ω–∫–∞</strong> (–∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞)</li>
                <li><strong>–ù–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</strong> (—Å–∏–Ω–∏–µ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞)</li>
                <li><strong>–í–æ–∑—Ä–∞—Å—Ç 45+</strong> (–∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞)</li>
                <li><strong>–í—ã—Å–æ–∫–∏–π –±–∞–ª–∞–Ω—Å</strong> (–∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞)</li>
                <li><strong>–ú—É–∂—Å–∫–æ–π –ø–æ–ª</strong> (–∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–ø—Ä–∞–≤–∞)</li>
            </ul>
        </div>
        """, unsafe_allow_html=True)
    
    with col2:
        st.markdown("""
        <div class="insight-card insight-weak">
            <h4>–§–∞–∫—Ç–æ—Ä—ã, —É–º–µ–Ω—å—à–∞—é—â–∏–µ —Ä–∏—Å–∫ –æ—Ç—Ç–æ–∫–∞</h4>
            <ul>
                <li><strong>3+ –ø—Ä–æ–¥—É–∫—Ç–∞</strong> (—Å–∏–Ω–∏–µ —Ç–æ—á–∫–∏ —Å–ª–µ–≤–∞)</li>
                <li><strong>–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</strong> (–∫—Ä–∞—Å–Ω—ã–µ —Ç–æ—á–∫–∏ —Å–ª–µ–≤–∞)</li>
                <li><strong>–ú–æ–ª–æ–¥–æ–π –≤–æ–∑—Ä–∞—Å—Ç</strong> (—Å–∏–Ω–∏–µ —Ç–æ—á–∫–∏ —Å–ª–µ–≤–∞)</li>
                <li><strong>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å</strong> (—Å–∏–Ω–∏–µ —Ç–æ—á–∫–∏ —Å–ª–µ–≤–∞)</li>
                <li><strong>–ñ–µ–Ω—Å–∫–∏–π –ø–æ–ª</strong> (—Å–∏–Ω–∏–µ —Ç–æ—á–∫–∏ —Å–ª–µ–≤–∞)</li>
            </ul>
        </div>
        """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="plotly-chart-container">
        <div style="text-align: center; padding: 1rem;">
            <h4>üé® Beeswarm –≥—Ä–∞—Ñ–∏–∫ SHAP –∑–Ω–∞—á–µ–Ω–∏–π</h4>
            <p><em>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤ –Ω–∞ –ø—Ä–æ–≥–Ω–æ–∑ –æ—Ç—Ç–æ–∫–∞ –¥–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</em></p>
        </div>
    </div>
    """, unsafe_allow_html=True)


    st.image("../../reports/beeswarm.png", 
            caption="Beeswarm –≥—Ä–∞—Ñ–∏–∫ SHAP –∑–Ω–∞—á–µ–Ω–∏–π: –∫—Ä–∞—Å–Ω—ã–π - –≤—ã—Å–æ–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–∞ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∏—Å–∫ –æ—Ç—Ç–æ–∫–∞, —Å–∏–Ω–∏–π - –Ω–∏–∑–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è —É–º–µ–Ω—å—à–∞—é—Ç —Ä–∏—Å–∫")

elif section == "–í–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤":
    st.markdown('<h2 class="eda-subtitle">üìà –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤–∞–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h2>', unsafe_allow_html=True)
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown('<div class="eda-card"><h4>–ì–ª–æ–±–∞–ª—å–Ω–∞—è –≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–≤</h4>', unsafe_allow_html=True)
        
        fig = px.pie(shap_df, values='SHAP_–∑–Ω–∞—á–µ–Ω–∏–µ', names='–ü—Ä–∏–∑–Ω–∞–∫',
                    title='–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è –ø—Ä–∏–∑–Ω–∞–∫–æ–≤',
                    color_discrete_sequence=px.colors.sequential.Viridis)
        fig.update_layout(
            paper_bgcolor='rgba(0,0,0,0)',
            font_color='#a0a5b0'
        )
        st.plotly_chart(fig, use_container_width=True)
        st.markdown('</div>', unsafe_allow_html=True)
    
    with col2:
        st.markdown("""
        <div class="eda-card">
            <h3 style="color: #b8860b;">üéØ –ë–∏–∑–Ω–µ—Å-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è</h3>
            <div style="color: #a0a5b0;">
                <div style="margin-bottom: 1rem;">
                    <strong>üèÜ –¢–æ–ø-5 –≤–ª–∏—è—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–∏–∑–Ω–∞–∫–æ–≤:</strong>
                    <ol>
                        <li><strong>NumOfProducts (28%)</strong> - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥—É–∫—Ç–æ–≤</li>
                        <li><strong>IsActiveMember (11%)</strong> - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç–∞</li>
                        <li><strong>Age (5%)</strong> - –í–æ–∑—Ä–∞—Å—Ç</li>
                        <li><strong>Balance (5%)</strong> - –ë–∞–ª–∞–Ω—Å —Å—á–µ—Ç–∞</li>
                        <li><strong>Gender (3%)</strong> - –ü–æ–ª –∫–ª–∏–µ–Ω—Ç–∞</li>
                    </ol>
                </div>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    st.markdown('<div class="eda-card"><h4>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–ª–∏—è–Ω–∏—è —Ñ–∞–∫—Ç–æ—Ä–æ–≤</h4>', unsafe_allow_html=True)
    st.dataframe(factors_df, use_container_width=True)
    st.markdown('</div>', unsafe_allow_html=True)

elif section == "Waterfall –∞–Ω–∞–ª–∏–∑":
    st.markdown('<h2 class="eda-subtitle">üèûÔ∏è Waterfall –∞–Ω–∞–ª–∏–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>', unsafe_allow_html=True)
    
    st.markdown("""
    <div class="eda-card">
        <h3 style="color: #b8860b;">–ê–Ω–∞–ª–∏–∑ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–π</h3>
        <div>
            <p><strong>Waterfall –≥—Ä–∞—Ñ–∏–∫</strong> –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –∫–∞–∂–¥—ã–π –ø—Ä–∏–∑–Ω–∞–∫ –ø–æ–≤–ª–∏—è–ª –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.</p>
            <p>–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –±–∞–∑–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (—Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º) –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–∫–ª–∞–¥ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞.</p>
        </div>
    </div>
    """, unsafe_allow_html=True)
    
    col1, col2, col3 = st.columns(3)
    
    with col1:
        st.markdown("""
        <div class="conclusion-card conclusion-high-risk">
            <h4>üî¥ –ö–ª–∏–µ–Ω—Ç #1 - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫</h4>
            <div>
                <p><strong>–ò—Ç–æ–≥: f(x) = 4.636</strong></p>
                <p><strong>–§–∞–∫—Ç–æ—Ä—ã —Ä–∏—Å–∫–∞:</strong></p>
                <ul>
                    <li>2 –ø—Ä–æ–¥—É–∫—Ç–∞ (+1.2)</li>
                    <li>–í—ã—Å–æ–∫–∏–π –±–∞–ª–∞–Ω—Å (+0.8)</li>
                    <li>–ù–µ–∞–∫—Ç–∏–≤–µ–Ω (+0.7)</li>
                    <li>–í–æ–∑—Ä–∞—Å—Ç 36 –ª–µ—Ç (+0.4)</li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 42%</strong></p>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    with col2:
        st.markdown("""
        <div class="conclusion-card conclusion-low-risk">
            <h4>üü¢ –ö–ª–∏–µ–Ω—Ç #2 - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫</h4>
            <div>
                <p><strong>–ò—Ç–æ–≥: f(x) = -1.667</strong></p>
                <p><strong>–ó–∞—â–∏—Ç–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:</strong></p>
                <ul>
                    <li>–ê–∫—Ç–∏–≤–µ–Ω (-0.9)</li>
                    <li>1 –ø—Ä–æ–¥—É–∫—Ç (-0.6)</li>
                    <li>–ì–µ—Ä–º–∞–Ω–∏—è (-0.3)</li>
                    <li>–ú—É–∂—á–∏–Ω–∞ (-0.2)</li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 5%</strong></p>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    with col3:
        st.markdown("""
        <div class="conclusion-card conclusion-statistical">
            <h4>üü° –ö–ª–∏–µ–Ω—Ç #3 - –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫</h4>
            <div>
                <p><strong>–ò—Ç–æ–≥: f(x) = 0.234</strong></p>
                <p><strong>–°–º–µ—à–∞–Ω–Ω—ã–µ —Ñ–∞–∫—Ç–æ—Ä—ã:</strong></p>
                <ul>
                    <li>1 –ø—Ä–æ–¥—É–∫—Ç (+0.8)</li>
                    <li>–í–æ–∑—Ä–∞—Å—Ç 41 –≥–æ–¥ (+0.4)</li>
                    <li>–ù–µ–∞–∫—Ç–∏–≤–Ω–∞ (+0.3)</li>
                    <li>–ì–µ—Ä–º–∞–Ω–∏—è (-0.5)</li>
                    <li>–í—ã—Å–æ–∫–∏–π –±–∞–ª–∞–Ω—Å (-0.4)</li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 15%</strong></p>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="plotly-chart-container">
        <div style="text-align: center; padding: 1rem;">
            <h4>üèûÔ∏è Waterfall –∞–Ω–∞–ª–∏–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</h4>
            <p><em>–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –≤–∫–ª–∞–¥–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–∑–Ω–∞–∫–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è</em></p>
        </div>
    </div>
    """, unsafe_allow_html=True)

    tab1, tab2, tab3 = st.tabs(["üî¥ –ö–ª–∏–µ–Ω—Ç –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∏—Å–∫–∞", "üü¢ –ö–ª–∏–µ–Ω—Ç –Ω–∏–∑–∫–æ–≥–æ —Ä–∏—Å–∫–∞", "üü° –ö–ª–∏–µ–Ω—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∏—Å–∫–∞"])

    with tab1:
        st.subheader("–ö–ª–∏–µ–Ω—Ç #1 - –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –æ—Ç—Ç–æ–∫–∞")
        st.image("../../reports/waterfall_1.png", 
                caption="Waterfall –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ —Å –≤—ã—Å–æ–∫–∏–º —Ä–∏—Å–∫–æ–º –æ—Ç—Ç–æ–∫–∞ (42%)")
            
    with tab2:
        st.subheader("–ö–ª–∏–µ–Ω—Ç #2 - –ù–∏–∑–∫–∏–π —Ä–∏—Å–∫ –æ—Ç—Ç–æ–∫–∞") 
        st.image("../../reports/waterfall_0.png",
                caption="Waterfall –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ —Å –Ω–∏–∑–∫–∏–º —Ä–∏—Å–∫–æ–º –æ—Ç—Ç–æ–∫–∞ (5%)")
            
    with tab3:
        st.subheader("–ö–ª–∏–µ–Ω—Ç #3 - –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ –æ—Ç—Ç–æ–∫–∞")
        st.image("../../reports/waterfall_2.png",
                caption="Waterfall –≥—Ä–∞—Ñ–∏–∫ –¥–ª—è –∫–ª–∏–µ–Ω—Ç–∞ —Å–æ —Å—Ä–µ–¥–Ω–∏–º —Ä–∏—Å–∫–æ–º –æ—Ç—Ç–æ–∫–∞ (15%)")

elif section == "–ü–æ—Ä—Ç—Ä–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤":
    st.markdown('<h2 class="eda-subtitle">üë• –ü–æ—Ä—Ç—Ä–µ—Ç—ã –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–æ —É—Ä–æ–≤–Ω—è–º —Ä–∏—Å–∫–∞</h2>', unsafe_allow_html=True)
    
    st.markdown('<div class="eda-card"><h4>–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π –∫–ª–∏–µ–Ω—Ç–æ–≤</h4>', unsafe_allow_html=True)
    
    fig = px.bar(profiles_df, x='–ü—Ä–æ—Ñ–∏–ª—å', y='–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å_–æ—Ç—Ç–æ–∫–∞',
                color='–£—Ä–æ–≤–µ–Ω—å_—Ä–∏—Å–∫–∞',
                color_discrete_map={
                    'üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π': '#ff4d4f',
                    'üü° –°—Ä–µ–¥–Ω–∏–π': '#ffc107', 
                    'üü¢ –ù–∏–∑–∫–∏–π': '#2ebd85'
                },
                title='–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞ –ø–æ –ø—Ä–æ—Ñ–∏–ª—è–º –∫–ª–∏–µ–Ω—Ç–æ–≤')
    fig.update_layout(
        paper_bgcolor='rgba(0,0,0,0)',
        plot_bgcolor='rgba(0,0,0,0)',
        font_color='#a0a5b0'
    )
    st.plotly_chart(fig, use_container_width=True)
    st.markdown('</div>', unsafe_allow_html=True)
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("""
        <div class="conclusion-card conclusion-high-risk">
            <h4>üö® –ö–ª–∏–µ–Ω—Ç –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∏—Å–∫–∞</h4>
            <div>
                <p><strong>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</strong></p>
                <ul>
                    <li><strong>1 –ø—Ä–æ–¥—É–∫—Ç –±–∞–Ω–∫–∞</strong></li>
                    <li><strong>–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</strong> (IsActiveMember=0)</li>
                    <li><strong>–í–æ–∑—Ä–∞—Å—Ç 45+ –ª–µ—Ç</strong></li>
                    <li><strong>–ú—É–∂—Å–∫–æ–π –ø–æ–ª</strong></li>
                    <li><strong>–ù—É–ª–µ–≤–æ–π –∏–ª–∏ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –±–∞–ª–∞–Ω—Å</strong></li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 27-42%</strong></p>
                <p><strong>–ë–∏–∑–Ω–µ—Å-–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∞, —Ç—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞</p>
            </div>
        </div>
        """, unsafe_allow_html=True)
        
        st.markdown("""
        <div class="conclusion-card conclusion-statistical" style="margin-top: 15px">
            <h4>üü° –ú–æ–ª–æ–¥–æ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∏–µ–Ω—Ç</h4>
            <div>
                <p><strong>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</strong></p>
                <ul>
                    <li><strong>1 –ø—Ä–æ–¥—É–∫—Ç –±–∞–Ω–∫–∞</strong></li>
                    <li><strong>–ù–µ–∞–∫—Ç–∏–≤–µ–Ω</strong></li>
                    <li><strong>–í–æ–∑—Ä–∞—Å—Ç 18-30 –ª–µ—Ç</strong></li>
                    <li><strong>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å</strong></li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 10-20%</strong></p>
                <p><strong>–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª:</strong> –í—ã—Å–æ–∫–∏–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —É–¥–µ—Ä–∂–∞–Ω–∏—è —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏—é</p>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    with col2:
        st.markdown("""
        <div class="conclusion-card conclusion-low-risk">
            <h4>üü¢ –ö–ª–∏–µ–Ω—Ç –ù–ò–ó–ö–û–ì–û —Ä–∏—Å–∫–∞</h4>
            <div style="color: #a0a5b0;">
                <p><strong>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</strong></p>
                <ul>
                    <li>üì¶ <strong>3+ –ø—Ä–æ–¥—É–∫—Ç–∞ –±–∞–Ω–∫–∞</strong></li>
                    <li>‚ö° <strong>–ê–∫—Ç–∏–≤–µ–Ω</strong> (IsActiveMember=1)</li>
                    <li>üë© <strong>–í–æ–∑—Ä–∞—Å—Ç 20-35 –ª–µ—Ç</strong></li>
                    <li>üë© <strong>–ñ–µ–Ω—Å–∫–∏–π –ø–æ–ª</strong></li>
                    <li>üí∞ <strong>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–∞–Ω—Å</strong></li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 1-5%</strong></p>
                <p><strong>–ë–∏–∑–Ω–µ—Å-–∑–Ω–∞—á–µ–Ω–∏–µ:</strong> –õ–æ—è–ª—å–Ω–∞—è –±–∞–∑–∞, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –¥–ª—è –∫—Ä–æ—Å—Å-–ø—Ä–æ–¥–∞–∂</p>
            </div>
        </div>
        """, unsafe_allow_html=True)
        
        st.markdown("""
        <div class="conclusion-card conclusion-business" style="margin-top: 15px">
            <h4>üíé VIP –∫–ª–∏–µ–Ω—Ç</h4>
            <div>
                <p><strong>–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</strong></p>
                <ul>
                    <li><strong>4+ –ø—Ä–æ–¥—É–∫—Ç–∞ –±–∞–Ω–∫–∞</strong></li>
                    <li><strong>–ê–∫—Ç–∏–≤–µ–Ω</strong></li>
                    <li><strong>–í–æ–∑—Ä–∞—Å—Ç 40-55 –ª–µ—Ç</strong></li>
                    <li><strong>–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–π –±–∞–ª–∞–Ω—Å</strong></li>
                </ul>
                <p><strong>–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—Ç—Ç–æ–∫–∞: 1-2%</strong></p>
                <p><strong>–¶–µ–Ω–Ω–æ—Å—Ç—å:</strong> –ö–ª—é—á–µ–≤–æ–π –∫–ª–∏–µ–Ω—Ç, —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–µ–º–∏–∞–ª—å–Ω–æ–≥–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è</p>
            </div>
        </div>
        """, unsafe_allow_html=True)

elif section == "–ë–∏–∑–Ω–µ—Å-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏":
    st.markdown('<h2 class="eda-subtitle">üí° –ë–∏–∑–Ω–µ—Å-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è</h2>', unsafe_allow_html=True)
    
    col1, col2 = st.columns(2)
    
    with col1:
        st.markdown("""
        <div class="eda-card">
            <h3 style="color: #b8860b;">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –≥—Ä—É–ø–ø–∞–º</h3>
            <h4 style="color: #ff4d4f;">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h4>   
            <p><strong>–ö–ª–∏–µ–Ω—Ç—ã —Å 1 –ø—Ä–æ–¥—É–∫—Ç–æ–º + –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã</strong></p> 
            <ul>
                <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –∑–≤–æ–Ω–æ–∫ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</li>
                <li>–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å–æ —Å–∫–∏–¥–∫–æ–π 20%</li>
                <li>–ë–æ–Ω—É—Å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –ø–æ –≤–∫–ª–∞–¥—É</li>
                <li>–°—Ä–æ—á–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è –∫–∞–º–ø–∞–Ω–∏—è</li>
            </ul>
            <h4 style="color: #ffc107;">–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h4>
            <p><strong>–ö–ª–∏–µ–Ω—Ç—ã 45+ –ª–µ—Ç</strong></p>
            <ul>
                <li>–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è —Å—Ç–∞—Ä—à–µ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞</li>
                <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–π —Å–æ–≤–µ—Ç–Ω–∏–∫</li>
                <li>–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –ø–æ –ø–µ–Ω—Å–∏–æ–Ω–Ω—ã–º –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è–º</li>
                <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</li>
            </ul>
        </div>
        """, unsafe_allow_html=True)
    
    with col2:
        st.markdown("""
        <div class="eda-card">
            <h3 style="color: #b8860b;">–°—Ç—Ä–∞—Ç–µ–≥–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h3>
            <div>
                <h4 style="color: #2ebd85;">–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</h4>
                <p><strong>–ö–ª–∏–µ–Ω—Ç—ã —Å 2+ –ø—Ä–æ–¥—É–∫—Ç–∞–º–∏, –∞–∫—Ç–∏–≤–Ω—ã</strong></p>
                <ul>
                    <li>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</li>
                    <li>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø—Ä–µ–º–∏—É–º-—É—Å–ª—É–≥</li>
                    <li>–£–ª—É—á—à–µ–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ –æ–ø—ã—Ç–∞</li>
                    <li>–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –¥—Ä—É–∑—å—è–º</li>
                </ul>
            </div>
            <div>
                <h4 style="color: #5294e2;">–ü—Ä–æ–∞–∫—Ç–∏–≤–Ω—ã–µ –º–µ—Ä—ã</h4>
                <p><strong>–î–ª—è –≤—Å–µ—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤</strong></p>
                <ul>
                    <li>–†–µ–≥—É–ª—è—Ä–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
                    <li>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</li>
                    <li>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–∞—Ö</li>
                    <li>–ê–Ω–∞–ª–∏–∑ —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏</li>
                </ul>
            </div>
        </div>
        """, unsafe_allow_html=True)
    
    st.markdown("""
    <div class="insight-card">
        <h4>–ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π</h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
            <div>
                <strong>üì¶ –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤</strong>
                <p>1 –ø—Ä–æ–¥—É–∫—Ç ‚Üí –ö—Ä–æ—Å—Å-–ø—Ä–æ–¥–∞–∂–∏<br>2 –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –£–¥–µ—Ä–∂–∞–Ω–∏–µ<br>3+ –ø—Ä–æ–¥—É–∫—Ç–∞ ‚Üí –õ–æ—è–ª—å–Ω–æ—Å—Ç—å</p>
            </div>
            <div>
                <strong>‚ö° –ü–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</strong>
                <p>–ù–µ–∞–∫—Ç–∏–≤–µ–Ω ‚Üí –†–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è<br>–ê–∫—Ç–∏–≤–µ–Ω ‚Üí –ü–æ–æ—â—Ä–µ–Ω–∏–µ<br>–û—á–µ–Ω—å –∞–∫—Ç–∏–≤–µ–Ω ‚Üí –ü—Ä–µ–º–∏—É–º</p>
            </div>
            <div>
                <strong>üë• –ü–æ –¥–µ–º–æ–≥—Ä–∞—Ñ–∏–∏</strong>
                <p>–ú–æ–ª–æ–¥–æ–π ‚Üí –¶–∏—Ñ—Ä–æ–≤–∏–∑–∞—Ü–∏—è<br>–°—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç ‚Üí –°–µ–º–µ–π–Ω—ã–µ –ø–∞–∫–µ—Ç—ã<br>–°—Ç–∞—Ä—à–∏–π ‚Üí –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å</p>
            </div>
            <div>
                <strong>üí∞ –ü–æ –±–∞–ª–∞–Ω—Å—É</strong>
                <p>–ù–∏–∑–∫–∏–π ‚Üí –ú–æ—Ç–∏–≤–∞—Ü–∏—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–π<br>–°—Ä–µ–¥–Ω–∏–π ‚Üí –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏<br>–í—ã—Å–æ–∫–∏–π ‚Üí Private banking</p>
            </div>
        </div>
    </div>
    """, unsafe_allow_html=True)

# –§—É—Ç–µ—Ä
st.markdown("---")
st.markdown("""
<div class="footer">
    <p style="text-align: center; color: #6c727d; margin: 0;">
        üîç –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º SHAP –∞–Ω–∞–ª–∏–∑–∞ –∏ –±–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∏
    </p>
</div>
""", unsafe_allow_html=True)
